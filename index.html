<!DOCTYPE html>
<html lang="en">

<head>
  <meta name="viewport" content="width=device-width" />
  <title>ParticleSlider</title>
  <style>
    @hintImg: url('amp-logo.webp');


    html,
    body {
      width: 100%;
      height: 100%;
      margin: 0;
      padding: 0;
      overflow: hidden;
    }

    .draw {
      position: absolute;
      z-index: 1;
    }

    @media (min-width: 1000px) {
      body {
        background-image: @hintImg;
        background-repeat: no-repeat;

        &>.dg {
          display: block;
        }
      }
    }
  </style>
</head>

<body id="particle-slider">
  <div class="slides">
    <div id="first-slide" class="slide" data-src="amp-logo.webp"></div>
  </div>
  <customhtml>
    <script>
      function changeColour() {
        var arrayColours = [
          "#BCFF84",
          "#FF73D6",
          "#9973FF",
          "#FFE280",
          "#FFAC60",
          "#70F9FF",
          "#FFFFFF",
        ];

        function getRandomInt(max) {
          return Math.floor(Math.random() * Math.floor(max));
        }

        var elem = document.createElement("div");
        elem.style = `position:absolute;width:100%;height:100%;opacity:1;background: ${arrayColours[getRandomInt(7)]
          }; mix-blend-mode: darken;`;
        document.body.appendChild(elem);
      }

      changeColour();
    </script>
  </customhtml>
  <canvas class="draw"></canvas>
  <script>
    var init = function () {
      var isMobile =
        navigator.userAgent &&
        navigator.userAgent.toLowerCase().indexOf("mobile") >= 0;
      var isSmall = window.innerWidth < 1000;

      var ps = new ParticleSlider({
        ptlGap: isMobile || isSmall ? 0 : 0,
        ptlSize: isMobile || isSmall ? 1 : 1,
        width: 1e9,
        height: 1e9,
      });

      var gui = new dat.GUI();
      gui
        .add(ps, "ptlGap")
        .min(0)
        .max(5)
        .step(5)
        .onChange(function () {
          ps.init(true);
        });
      gui
        .add(ps, "ptlSize")
        .min(1)
        .max(5)
        .step(5)
        .onChange(function () {
          ps.init(true);
        });
      gui.add(ps, "restless");
      gui.addColor(ps, "color").onChange(function (value) {
        ps.monochrome = true;
        ps.setColor(value);
        ps.init(true);
      });

      window.addEventListener
        ? window.addEventListener(
          "click",
          function () {
            ps.init(true);
          },
          false
        )
        : (window.onclick = function () {
          ps.init(true);
        });
    };

    var initParticleSlider = (function () {
      var psScript = document.createElement("script");
      psScript.addEventListener
        ? psScript.addEventListener("load", init, false)
        : (psScript.onload = init);
      psScript.src =
        "https://s3-us-west-2.amazonaws.com/s.cdpn.io/23500/ps-0.9.js";
      psScript.setAttribute("type", "text/javascript");
      document.body.appendChild(psScript);
    })(
      window.addEventListener
        ? window.addEventListener("load", initParticleSlider, false)
        : (window.onload = initParticleSlider)
    );
  </script>
</body>

</html>